import{u as R,d as z,g as q,y as Y,z as ee,r as i,i as te,o as r,c as v,a as e,w as V,v as U,A as oe,f as M,s as se,F as j,p as T,t as m,B as le,b as h,x as ie,C as ae,D as ne,j as b,k as A,m as H,l as O,n as I,q as de,_ as re}from"./index-fae8f111.js";import{_ as ue}from"./AddShowComponent-3e5f0621.js";import{_ as ce}from"./AdduserComponent-9f3783dc.js";const pe={class:"w-full laptop:px-2 z-[9999]"},ve=e("h3",{class:"modal-header mb-4 text-white/80 text-lg font-semibold text-center"},"New Episode",-1),he={class:"flex flex-col gap-y-4"},fe={class:"flex flex-col gap-y-4 laptop:gap-y-0 laptop:flex-row gap-x-2 justify-between"},Ce={key:0,class:"w-16 h-16",viewBox:"0 0 24 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},we=e("path",{class:"fill-[#CCCCCC] group-hover:fill-[#CCCCCC]/80 group-active:fill-[#CCCCCC]",d:"M21.6 0H2.4C1.0764 0 0 1.0764 0 2.4V16.8C0 18.1236 1.0764 19.2 2.4 19.2H21.6C22.9236 19.2 24 18.1236 24 16.8V2.4C24 1.0764 22.9236 0 21.6 0ZM5.4 3.6C5.87739 3.6 6.33523 3.78964 6.67279 4.12721C7.01036 4.46477 7.2 4.92261 7.2 5.4C7.2 5.87739 7.01036 6.33523 6.67279 6.67279C6.33523 7.01036 5.87739 7.2 5.4 7.2C4.92261 7.2 4.46477 7.01036 4.12721 6.67279C3.78964 6.33523 3.6 5.87739 3.6 5.4C3.6 4.92261 3.78964 4.46477 4.12721 4.12721C4.46477 3.78964 4.92261 3.6 5.4 3.6ZM12 15.6H3.6L8.4 9.6L10.2 12L13.8 7.2L20.4 15.6H12Z"},null,-1),me=[we],ge={class:"flex flex-col flex-1 gap-y-2"},_e={class:"flex gap-x-2"},xe=["disabled"],be=e("option",{value:"",disabled:""},"Select season",-1),ye=["value"],ke=e("option",{value:""},"New season",-1),Se={class:"flex flex-col"},Me={class:"flex gap-2 flex-wrap mt-4"},Le=["onClick"],$e={class:"text-white/80 text-sm font-semibold"},Ee={class:"flex items-center gap-x-2 px-2 py-1"},Fe=ie('<div><svg width="20" height="24" viewBox="0 0 20 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path class="group-hover:fill-[#CCCCCC]/40 fill-[#CCCCCC]" d="M17.75 24H2.75C1.505 24 0.5 22.995 0.5 21.75V2.25C0.5 1.005 1.505 0 2.75 0H13.385C13.985 0 14.555 0.24 14.975 0.66L19.34 5.025C19.76 5.445 20 6.015 20 6.615V21.75C20 22.995 18.995 24 17.75 24ZM2.75 1.5C2.33 1.5 2 1.83 2 2.25V21.75C2 22.17 2.33 22.5 2.75 22.5H17.75C18.17 22.5 18.5 22.17 18.5 21.75V6.615C18.5012 6.51664 18.4818 6.41911 18.443 6.32869C18.4043 6.23828 18.3471 6.15697 18.275 6.09L13.91 1.725C13.7706 1.58503 13.5825 1.50441 13.385 1.5H2.75Z"></path><path class="group-hover:fill-[#CCCCCC]/40 fill-[#CCCCCC]" d="M19.07 7.50018H14.705C13.49 7.50018 12.5 6.51018 12.5 5.29518V0.930176C12.5 0.510176 12.83 0.180176 13.25 0.180176C13.67 0.180176 14 0.510176 14 0.930176V5.29518C14 5.68518 14.315 6.00018 14.705 6.00018H19.07C19.49 6.00018 19.82 6.33018 19.82 6.75018C19.82 7.17018 19.49 7.50018 19.07 7.50018ZM6.5 9.00018H14V12.0002H6.5V9.00018Z"></path><path class="group-hover:fill-[#CCCCCC]/40 fill-[#CCCCCC]" d="M13.25 16.5C12.83 16.5 12.5 16.17 12.5 15.75V11.25C12.5 10.83 12.83 10.5 13.25 10.5C13.67 10.5 14 10.83 14 11.25V15.75C14 16.17 13.67 16.5 13.25 16.5ZM7.25 18C6.83 18 6.5 17.67 6.5 17.25V11.25C6.5 10.83 6.83 10.5 7.25 10.5C7.67 10.5 8 10.83 8 11.25V17.25C8 17.67 7.67 18 7.25 18Z"></path><path class="group-hover:fill-[#CCCCCC]/40 fill-[#CCCCCC]" d="M11 15H14V16.5C14 17.325 13.325 18 12.5 18H11C10.175 18 9.5 17.325 9.5 16.5C9.5 15.675 10.175 15 11 15ZM5 16.5H8V18C8 18.825 7.325 19.5 6.5 19.5H5C4.175 19.5 3.5 18.825 3.5 18C3.5 17.175 4.175 16.5 5 16.5Z"></path></svg></div>',1),Ve={class:"text-white font-medium"},Ze={key:0,class:"text-white font-medium"},De={class:"flex justify-end gap-x-4 mt-4"},Ue={__name:"AddEpisodeComponent",props:["seasons","editEpi"],emits:["close","scrollToAddUser"],setup(E,{emit:y}){const l=E,L=R(),k=z(),C=q(),$=Y(),F=ee(),d=i(""),c=i(""),w=i(),g=i(),f=i(""),u=i([]),n=i(""),a=i(!1),p=i(""),B=i(null),N=i(null),Z=i(""),D=i(),_=i(0);function P(){if(d.value&&w.value&&f.value&&u.value&&g.value&&_.value){const s=new FormData;s.append("title",d.value),s.append("desc",f.value),s.append("img",w.value),s.append("audio",g.value),s.append("duration",_.value);for(let t=0;t<u.value.length;t++)s.append("host[]",Number(u.value[t]));c.value&&s.append("date",c.value),n.value&&s.append("seasonId",n.value),Object.keys(l.editEpi).length?(console.log(s),s.append("_method","PUT"),C.editEpisode(s,Number(L.params.id),l.editEpi.id).then(t=>{t.status===200&&(w.value="",g.value="",d.value="",c.value="",f.value="",u.value=[],n.value="",_.value=0,y("close"))})):C.createEpisode(s,L.params.id).then(t=>(t.status===200&&(w.value="",g.value="",d.value="",c.value="",f.value="",u.value=[],n.value="",_.value=0,y("close")),t))}else F.showNotification("Please fill all required fields","error")}function J(s,t){C.deleteEpisode(s,t).then(o=>(o.status===200&&(w.value="",g.value="",d.value="",c.value="",c.value="",f.value="",u.value=[],n.value="",_.value=0,y("close")),o))}function G(s){const t=u.value.indexOf(s);console.log(t),t!==-1?(console.log("already selected!, remove"),u.value.splice(t,1)):(console.log("not selected yet! adding"),u.value.push(s))}function K(){B.value.click()}function Q(){_.value=0,N.value.click()}function W(s){const t=s.target.files;if(t.length){const o=new FileReader;o.onload=x=>{p.value=x.target.result},o.readAsDataURL(t[0]),w.value=t[0]}}async function X(s){const t=s.target.files,o=t[0],x=["audio/mpeg","audio/wav","audio/ogg"];if(t.length&&x.includes(o.type)){g.value=o,Z.value=o.name,D.value=(o.size/(1024*1024)).toFixed(2);const S=new Audio;S.src=URL.createObjectURL(o),S.addEventListener("loadedmetadata",()=>{_.value=Math.floor(S.duration/60),S.pause(),URL.revokeObjectURL(S.src),console.log(_.value)})}}return te(()=>{if(Object.keys(l.editEpi).length){u.value=JSON.parse(JSON.stringify(l.editEpi.users)).map(t=>t.id);const s=new Date(l.editEpi.created_at);c.value=s.toISOString().split("T")[0],d.value=l.editEpi.title,f.value=l.editEpi.description,n.value=l.editEpi.season_id,a.value=!0}}),(s,t)=>(r(),v("div",pe,[ve,e("div",he,[V(e("input",{class:"focus:outline-none appearance-none border border-white/40 pl-2 py-1 rounded-[10px] text-base text-white/80 focus:border-white/80 bg-transparent placeholder:text-white/40",placeholder:"Episode title","onUpdate:modelValue":t[0]||(t[0]=o=>d.value=o),type:"text",name:"title",id:"title"},null,512),[[U,d.value]]),e("div",fe,[e("div",{onClick:K,class:"rounded-[15px] cursor-pointer hover:bg-white/30 transition aspect-square overflow-hidden group w-[50%] laptop:w-[30%]"},[e("div",{style:oe({"background-image":`URL(${p.value})`}),class:"aspect-square w-full img_block flex justify-center items-center"},[p.value?M("",!0):(r(),v("svg",Ce,me))],4)]),e("input",{hidden:"",ref_key:"imgInput",ref:B,onChange:W,type:"file",name:"img",id:"img"},null,544),e("div",ge,[e("div",_e,[V(e("select",{class:"rounded-full bg-[#2F2F2F] text-white text-sm px-2 py-1 font-semibold",name:"season",id:"season",disabled:a.value,"onUpdate:modelValue":t[1]||(t[1]=o=>n.value=o)},[be,(r(!0),v(j,null,T(E.seasons,(o,x)=>(r(),v("option",{key:x,value:o.id},"season "+m(o.season_number),9,ye))),128)),ke],8,xe),[[se,n.value]]),V(e("input",{class:"focus:outline-none appearance-none border border-white/40 pl-2 py-1 rounded-[10px] text-base text-white/80 focus:border-white/80 bg-transparent placeholder:text-white/40","onUpdate:modelValue":t[2]||(t[2]=o=>c.value=o),type:"date",name:"date",id:"date"},null,512),[[U,c.value]])]),e("div",Se,[V(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=o=>f.value=o),placeholder:"description",class:"bg-transparent h-[20vh] appearance-none focus:outline-none text-white w-full p-2 rounded-[15px] border border-[#D6D6D6]/60 focus:border-[#D6D6D6] placeholder:text-white/40",name:"desc",id:"desc",rows:"5"},null,512),[[U,f.value]])]),e("div",Me,[(r(!0),v(j,null,T(h(k).users,(o,x)=>(r(),v("div",{key:x,class:le([[u.value.indexOf(o.id)!==-1?"bg-white/30":"bg-[#2F2F2F]/60"],"active:bg-white/30 cursor-pointer px-2 flex items-center rounded-full"]),onClick:S=>G(o.id)},[e("span",$e,m(o.name),1)],10,Le))),128)),e("button",{class:"text-white/80 text-sm font-semibold px-2 bg-white/20 hover:bg-white/10 rounded-full",onClick:t[4]||(t[4]=o=>s.$emit("scrollToAddUser"))},"Add new")])])])]),e("div",{onClick:Q,class:"inline-block bg-[#2F2F2F] hover:bg-[#2F2F2F]/60 mt-4 transition rounded-[10px] cursor-pointer"},[e("div",Ee,[Fe,e("span",Ve,m(Z.value?Z.value:"select audio file"),1),D.value?(r(),v("span",Ze,m(D.value+" MB"),1)):M("",!0)])]),e("input",{hidden:"",onChange:X,ref_key:"audioInput",ref:N,type:"file",name:"audio",id:"audio"},null,544),e("div",De,[Object.keys(l.editEpi).length?(r(),v("button",{key:0,class:"text-black/80 bg-[#FF0F00]/60 hover:bg-[#FF0F00]/40 active:bg-[#FF0F00]/60 rounded-full px-4 py-1 font-medium",onClick:t[5]||(t[5]=o=>J(E.editEpi.id,h(L).params.id))},"delete")):M("",!0),e("button",{class:"text-black/80 bg-white/80 hover:bg-white/60 active:bg-white/80 rounded-full px-4 py-1 font-medium",onClick:P},m(h($).progress?h($).progress+" uploading":"Add episode"),1)])]))}};const Ae={class:"bg-gradient-to-t from-[#262626]/0 to-[#666666] pt-8 px-4 tablet:px-8 relative"},He=e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{class:"fill-[#CCCCCC]/80 group-hover:fill-[#CCCCCC]/60 group-active:fill-[#CCCCCC]/80",d:"M15.74 3.59283C16.0867 3.24622 16.0867 2.66852 15.74 2.33968L13.6603 0.259964C13.3315 -0.0866546 12.7538 -0.0866546 12.4072 0.259964L10.7718 1.8864L14.1047 5.21928M0 12.6671V16H3.33287L13.1626 6.16137L9.82975 2.8285L0 12.6671Z"})],-1),je=[He],Be={class:"w-[152px] laptop:w-[288px] aspect-square laptop:float-left laptop:mr-4 overflow-hidden rounded-[10px] mx-auto shadow-img-shadow"},Ne=["src"],Te={class:"text-white text-lg mt-8 font-semibold"},Oe={class:"flex justify-between mt-4"},Ie={class:"flex gap-x-1 items-center"},Re=e("div",null,[e("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("circle",{cx:"4",cy:"4",r:"4",fill:"white","fill-opacity":"0.4"})])],-1),ze={class:"text-white/80 text-sm font-medium"},qe={class:"text-white/80 text-sm font-medium"},Pe={class:"text-white/80 text-base leading-7 line-clamp-4 laptop:min-h-[200px]"},Je={class:"text-end mx-4 mt-4 tablet:mx-8"},Ge={key:0,class:"modal-mask"},Ke={class:"modal-container rounded-[10px] relative"},Qe=e("div",{class:"w-8 h-8"},[e("svg",{class:"w-full h-full",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M6.2376 11.2624L8.5008 9ZM10.7632 6.7376L8.5008 9ZM8.5008 9L6.2376 6.7376ZM8.5008 9L10.7632 11.2624ZM8.5 17C12.9184 17 16.5 13.4184 16.5 9C16.5 4.5816 12.9184 1 8.5 1C4.0816 1 0.5 4.5816 0.5 9C0.5 13.4184 4.0816 17 8.5 17Z",class:"fill-white/80 group-hover:fill-white/40 group-active:fill-white/60"}),e("path",{d:"M6.2376 11.2624L8.5008 9M8.5008 9L10.7632 6.7376M8.5008 9L6.2376 6.7376M8.5008 9L10.7632 11.2624M8.5 17C12.9184 17 16.5 13.4184 16.5 9C16.5 4.5816 12.9184 1 8.5 1C4.0816 1 0.5 4.5816 0.5 9C0.5 13.4184 4.0816 17 8.5 17Z",class:"stroke-black/40","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),We=[Qe],Xe={class:"flex overflow-hidden"},Ye={class:"w-full",ref:"addShow"},et={key:0,class:"modal-mask"},tt={class:"modal-container laptop:w-[50%] rounded-[10px] relative"},ot=e("div",{class:"w-8 h-8"},[e("svg",{class:"w-full h-full",viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M6.2376 11.2624L8.5008 9ZM10.7632 6.7376L8.5008 9ZM8.5008 9L6.2376 6.7376ZM8.5008 9L10.7632 11.2624ZM8.5 17C12.9184 17 16.5 13.4184 16.5 9C16.5 4.5816 12.9184 1 8.5 1C4.0816 1 0.5 4.5816 0.5 9C0.5 13.4184 4.0816 17 8.5 17Z",class:"fill-white/80 group-hover:fill-white/40 group-active:fill-white/60"}),e("path",{d:"M6.2376 11.2624L8.5008 9M8.5008 9L10.7632 6.7376M8.5008 9L6.2376 6.7376M8.5008 9L10.7632 11.2624M8.5 17C12.9184 17 16.5 13.4184 16.5 9C16.5 4.5816 12.9184 1 8.5 1C4.0816 1 0.5 4.5816 0.5 9C0.5 13.4184 4.0816 17 8.5 17Z",class:"stroke-black/40","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),st=[ot],lt={class:"flex overflow-x-hidden"},dt={__name:"AdminShowComponent",setup(E){const y=z(),l=q(),L=R(),k=i(!1),C=i(!1),$=i(null),F=i(null),d=i({});ae(async()=>{y.users.length||y.getUsers(),await l.getShow(L.params.id)});function c(){$.value.scrollIntoView({behavior:"smooth",inline:"end"})}function w(){F.value.scrollIntoView({behavior:"smooth",inline:"start"})}function g(){k.value=!1,d.value={}}function f(n){console.log(n),C.value=!0,d.value=n}const u=ne(()=>{let n=0;if(Object.keys(l.currentShow).length){for(let a=0;a<l.currentShow.seasons.length;a++)for(let p=0;p<l.currentShow.seasons[a].episodes.length;p++)n+=l.currentShow.seasons[a].episodes[p].number_of_likes;return n}return 0});return(n,a)=>(r(),v(j,null,[b(H,{name:"fadecard"},{default:A(()=>[h(l).currentShow.id?(r(),v("div",{key:h(l).currentShow.id},[e("div",Ae,[e("div",{onClick:a[0]||(a[0]=de(p=>k.value=!0,["stop"])),class:"absolute top-4 right-4 group cursor-pointer"},je),e("div",Be,[e("img",{class:"w-full h-full",src:h(l).currentShow.cover_img,alt:""},null,8,Ne)]),e("h1",Te,m(h(l).currentShow.title),1),e("div",Oe,[e("div",Ie,[Re,e("span",ze,m(h(l).seasonCount)+" seasons",1)]),e("div",null,[e("span",qe,m(u.value)+" likes",1)])]),e("p",Pe,m(h(l).currentShow.description),1)]),e("div",Je,[e("button",{class:"text-base text-white font-medium bg-[#D9D9D9]/10 rounded-[15px] px-3 py-1 transition hover:bg-[#D9D9D9]/5 active:bg-[#D9D9D9]/10",onClick:a[1]||(a[1]=p=>C.value=!0)},"New episode")]),b(re,{onEditEpisode:f})])):M("",!0)]),_:1}),(r(),O(I,{to:"body"},[b(H,{name:"modal"},{default:A(()=>[k.value?(r(),v("div",Ge,[e("div",Ke,[e("button",{onClick:a[2]||(a[2]=p=>{k.value=!1,d.value={}}),class:"absolute left-1 top-1 group",type:"button"},We),e("div",Xe,[e("div",Ye,[b(ue,{onScrollToAddUser:c,currentShow:{...h(l).currentShow,isEdit:!0},onClose:g},null,8,["currentShow"])],512)])])])):M("",!0)]),_:1})])),(r(),O(I,{to:"body"},[b(H,{name:"modal"},{default:A(()=>[C.value?(r(),v("div",et,[e("div",tt,[e("button",{onClick:a[3]||(a[3]=p=>{C.value=!1,d.value={},w()}),class:"absolute left-1 top-1 group",type:"button"},st),e("div",lt,[e("div",{class:"flex-none w-full",ref_key:"addEpisode",ref:F},[b(Ue,{editEpi:d.value,seasons:h(l).currentShow.seasons,onClose:a[4]||(a[4]=p=>C.value=!1),onScrollToAddUser:c},null,8,["editEpi","seasons"])],512),e("div",{class:"flex-none w-full flex items-center",ref_key:"addUser",ref:$},[b(ce,{onScrollToAddShow:w})],512)])])])):M("",!0)]),_:1})]))],64))}};export{dt as default};
